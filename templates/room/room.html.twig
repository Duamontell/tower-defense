{% extends 'base.html.twig' %}

{% block title %}
    Комната
{% endblock %}

{% block javascripts %}
    <script>
        window.roomId = {{ room.id }};
        window.mercureUrl = '{{ mercureUrl }}';
        window.userId = {{ userId }}
    </script>
    <script defer src="/js/room/room.js"></script>
{% endblock %}

{% block body %}
<body>
    <div class="room-container">
        <div class="menu-header">
            <h1>Комната {{ room.id }}</h1>
        </div>
        <div class="room-content" id="players-list">
            {% for player in players %}
                <div class="player" id="player-{{ player.player.id }}">
                    <span class="player-slot">{{ player.slot }}: </span>
                    <span class="player-name">{{ player.player.email }}</span>
                    {% if player.player.id == userId %}
                        <button class="ready-button"
                                data-player-id="{{ player.player.id }}"
                                data-ready="{{ player.isReady ? '1' : '0' }}">
                            {{ player.isReady ? 'Готов' : 'Не готов' }}
                        </button>
                    {% else %}
                        <span class="player-status"
                            id="player-status-{{ player.player.id }}">
                            {{ player.isReady ? 'Готов' : 'Не готов' }}
                        </span>
                    {% endif %}
                </div>
            {% endfor %}
        </div>
        <div id="start-countdown" style="display:none; text-align:center; margin-top:20px;">
            Игра начнётся через <span id="count">5</span> секунд...
        </div>
    </div>
</body>
{% endblock %}
